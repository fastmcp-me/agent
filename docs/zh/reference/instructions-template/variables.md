# æ¨¡æ¿å˜é‡å‚è€ƒ

æœ¬é¡µé¢æä¾›äº†è‡ªå®šä¹‰æŒ‡ä»¤æ¨¡æ¿ä¸­æ‰€æœ‰å¯ç”¨å˜é‡çš„å®Œæ•´å‚è€ƒã€‚

## HTML è½¬ä¹‰è¡Œä¸º

**é‡è¦**: 1MCP é»˜è®¤é…ç½® Handlebars æ—¶ä½¿ç”¨ `noEscape: true`ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰æ¨¡æ¿å˜é‡éƒ½è¾“å‡ºæœªè½¬ä¹‰çš„å†…å®¹ã€‚è¿™ä¸“é—¨ä¸º LLM æŒ‡ä»¤æ¨¡æ¿è®¾è®¡ï¼ŒHTML è½¬ä¹‰ä¼šå¹²æ‰°å¯è¯»æ€§å’Œ AI è§£æã€‚

- **æ‰€æœ‰å˜é‡éƒ½æœªè½¬ä¹‰**: æ‰€æœ‰å†…å®¹ä½¿ç”¨å¸¸è§„ <span v-pre>`{{variable}}`</span> è¯­æ³•
- **XML æ ‡ç­¾æ¸…æ™°æ¸²æŸ“**: `<server-name>` è¾“å‡ºä¸º `<server-name>`ï¼ˆä¸æ˜¯ HTML å®ä½“ï¼‰
- **æ— éœ€ä¸‰é‡æ‹¬å·**: <span v-pre>`{{instructions}}`</span> ç›´æ¥è¾“å‡ºåŸå§‹å†…å®¹

## æœåŠ¡å™¨çŠ¶æ€å˜é‡

### <span v-pre>`{{serverCount}}`</span>

- **ç±»å‹**: `number`
- **æè¿°**: è¿æ¥ä¸”æœ‰æŒ‡ä»¤çš„æœåŠ¡å™¨æ•°é‡ï¼ˆæ—§ç‰ˆ - ä¿ç•™ç”¨äºå‘åå…¼å®¹ï¼‰
- **ç¤ºä¾‹**: `3`
- **æ³¨æ„**: ä»…è®¡ç®—å…·æœ‰éç©ºæŒ‡ä»¤çš„æœåŠ¡å™¨ã€‚æ–°æ¨¡æ¿è¯·ä½¿ç”¨ `instructionalServerCount`ã€‚

### <span v-pre>`{{instructionalServerCount}}`</span>

- **ç±»å‹**: `number`
- **æè¿°**: è¿æ¥ä¸”æœ‰æŒ‡ä»¤çš„æœåŠ¡å™¨æ•°é‡ï¼ˆ`serverCount` çš„æ›´æ¸…æ™°åç§°ï¼‰
- **ç¤ºä¾‹**: `3`
- **æ³¨æ„**: ä»…è®¡ç®—å…·æœ‰éç©ºæŒ‡ä»¤çš„æœåŠ¡å™¨

### <span v-pre>`{{connectedServerCount}}`</span>

- **ç±»å‹**: `number`
- **æè¿°**: è¿æ¥çš„æœåŠ¡å™¨æ€»æ•°ï¼ˆåŒ…æ‹¬æ²¡æœ‰æŒ‡ä»¤çš„æœåŠ¡å™¨ï¼‰
- **ç¤ºä¾‹**: `5`
- **æ³¨æ„**: è®¡ç®—æ‰€æœ‰è¿æ¥çš„æœåŠ¡å™¨ï¼Œæ— è®ºæ˜¯å¦æœ‰æŒ‡ä»¤

### <span v-pre>`{{hasServers}}`</span>

- **ç±»å‹**: `boolean`
- **æè¿°**: æ˜¯å¦æœ‰ä»»ä½•æœ‰æŒ‡ä»¤çš„æœåŠ¡å™¨è¿æ¥
- **ç¤ºä¾‹**: `true`
- **ç”¨æ³•**: æ¨¡æ¿é€»è¾‘çš„ä¸»è¦æ¡ä»¶ï¼ˆä¸ `hasInstructionalServers` ç›¸åŒï¼‰

### <span v-pre>`{{hasInstructionalServers}}`</span>

- **ç±»å‹**: `boolean`
- **æè¿°**: æ˜¯å¦æœ‰ä»»ä½•æœ‰æŒ‡ä»¤çš„æœåŠ¡å™¨è¿æ¥
- **ç¤ºä¾‹**: `true`
- **ç”¨æ³•**: æ˜¾ç¤ºåŸºäºæŒ‡ä»¤å†…å®¹çš„ä¸»è¦æ¡ä»¶

### <span v-pre>`{{serverList}}`</span>

- **ç±»å‹**: `string`
- **æè¿°**: æœåŠ¡å™¨åç§°çš„æ¢è¡Œåˆ†éš”åˆ—è¡¨ï¼ˆå­—æ¯é¡ºåºï¼‰
- **ç¤ºä¾‹**: `"api-server\ndatabase-server\nweb-server"`
- **ç”¨æ³•**: ç”¨äºç®€å•æ–‡æœ¬åˆ—è¡¨

### <span v-pre>`{{serverNames}}`</span>

- **ç±»å‹**: `array<string>`
- **æè¿°**: ç”¨äºè¿­ä»£çš„æœåŠ¡å™¨åç§°æ•°ç»„
- **ç¤ºä¾‹**: `["api-server", "database-server", "web-server"]`
- **ç”¨æ³•**: ä¸ <span v-pre>`{{#each}}`</span> è¾…åŠ©å‡½æ•°ä¸€èµ·ç”¨äºè‡ªå®šä¹‰æ ¼å¼åŒ–

### <span v-pre>`{{servers}}`</span>

- **ç±»å‹**: `array<ServerData>`
- **æè¿°**: ç”¨äºè¯¦ç»†è¿­ä»£å’Œæ¡ä»¶é€»è¾‘çš„æœåŠ¡å™¨å¯¹è±¡æ•°ç»„
- **ç»“æ„**:
  ```typescript
  interface ServerData {
    name: string; // æœåŠ¡å™¨åç§°ï¼ˆä¾‹å¦‚ "api-server"ï¼‰
    instructions: string; // æœåŠ¡å™¨æŒ‡ä»¤å†…å®¹
    hasInstructions: boolean; // æ­¤æœåŠ¡å™¨æ˜¯å¦æœ‰æŒ‡ä»¤
  }
  ```
- **ç”¨æ³•**: ä¸ <span v-pre>`{{#each}}`</span> ä¸€èµ·ä½¿ç”¨ä»¥è·å¾—æœ€å¤§çš„æ¨¡æ¿çµæ´»æ€§
- **ç¤ºä¾‹**:

::: v-pre

```text
{{#each servers}}
{{#if hasInstructions}}
### {{name}} æœåŠ¡å™¨
<{{name}}>
{{instructions}}
</{{name}}>
{{/if}}
{{/each}}
```

:::

### <span v-pre>`{{pluralServers}}`</span>

- **ç±»å‹**: `string`
- **æè¿°**: åŸºäºæœ‰æŒ‡ä»¤æœåŠ¡å™¨æ•°é‡çš„è¯­æ³•æ­£ç¡®çš„å•æ•°/å¤æ•°å½¢å¼
- **å€¼**: `"server"`ï¼ˆinstructionalServerCount = 1ï¼‰æˆ– `"servers"`ï¼ˆinstructionalServerCount â‰  1ï¼‰
- **ç¤ºä¾‹**: `"servers"`

### <span v-pre>`{{isAre}}`</span>

- **ç±»å‹**: `string`
- **æè¿°**: åŸºäºæœ‰æŒ‡ä»¤æœåŠ¡å™¨æ•°é‡çš„è¯­æ³•æ­£ç¡®çš„åŠ¨è¯å½¢å¼
- **å€¼**: `"is"`ï¼ˆinstructionalServerCount = 1ï¼‰æˆ– `"are"`ï¼ˆinstructionalServerCount â‰  1ï¼‰
- **ç¤ºä¾‹**: `"are"`

### <span v-pre>`{{connectedPluralServers}}`</span>

- **ç±»å‹**: `string`
- **æè¿°**: åŸºäºè¿æ¥æœåŠ¡å™¨æ€»æ•°çš„è¯­æ³•æ­£ç¡®çš„å•æ•°/å¤æ•°å½¢å¼
- **å€¼**: `"server"`ï¼ˆconnectedServerCount = 1ï¼‰æˆ– `"servers"`ï¼ˆconnectedServerCount â‰  1ï¼‰
- **ç¤ºä¾‹**: `"servers"`

### <span v-pre>`{{connectedIsAre}}`</span>

- **ç±»å‹**: `string`
- **æè¿°**: åŸºäºè¿æ¥æœåŠ¡å™¨æ€»æ•°çš„è¯­æ³•æ­£ç¡®çš„åŠ¨è¯å½¢å¼
- **å€¼**: `"is"`ï¼ˆconnectedServerCount = 1ï¼‰æˆ– `"are"`ï¼ˆconnectedServerCount â‰  1ï¼‰
- **ç¤ºä¾‹**: `"are"`

## å†…å®¹å˜é‡

### <span v-pre>`{{instructions}}`</span>

- **ç±»å‹**: `string`ï¼ˆæœªè½¬ä¹‰ï¼‰
- **æè¿°**: åŒ…è£…åœ¨ XML æ ·å¼æ ‡ç­¾ä¸­çš„æ‰€æœ‰æœåŠ¡å™¨æŒ‡ä»¤
- **æ ¼å¼**: `<server-name>\næŒ‡ä»¤...\n</server-name>`
- **ç”¨æ³•**: ä½¿ç”¨å¸¸è§„ <span v-pre>`{{instructions}}`</span> è¯­æ³•ï¼ˆé»˜è®¤æœªè½¬ä¹‰ï¼‰
- **ç¤ºä¾‹**:

  ```xml
  <api-server>
  ç”¨äºåç«¯æœåŠ¡çš„ API æœåŠ¡å™¨æŒ‡ä»¤
  </api-server>

  <web-server>
  ç”¨äºå‰ç«¯å¼€å‘çš„ç½‘é¡µæœåŠ¡å™¨æŒ‡ä»¤
  </web-server>
  ```

### <span v-pre>`{{filterContext}}`</span>

- **ç±»å‹**: `string`
- **æè¿°**: æ´»åŠ¨è¿‡æ»¤çš„æè¿°ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¸ºç©ºå­—ç¬¦ä¸²
- **ç¤ºä¾‹**:
  - `""`ï¼ˆæ— è¿‡æ»¤ï¼‰
  - `" (æŒ‰æ ‡ç­¾è¿‡æ»¤: backend, api)"`
  - `" (æŒ‰é«˜çº§è¡¨è¾¾å¼è¿‡æ»¤)"`
  - `" (æŒ‰é¢„è®¾è¿‡æ»¤)"`

## é…ç½®å˜é‡

### <span v-pre>`{{title}}`</span>

- **ç±»å‹**: `string`
- **æè¿°**: æŒ‡ä»¤æ¨¡æ¿çš„æ ‡é¢˜
- **é»˜è®¤å€¼**: `"1MCP - Model Context Protocol Proxy"`
- **å¯è‡ªå®šä¹‰**: å¯ä»¥åœ¨é…ç½®ä¸­è¦†ç›–
- **ç¤ºä¾‹**: `"æˆ‘çš„è‡ªå®šä¹‰ MCP ç½‘å…³"`

### <span v-pre>`{{toolPattern}}`</span>

- **ç±»å‹**: `string`
- **æè¿°**: ä»£ç†ä½¿ç”¨çš„å·¥å…·å‘½åæ¨¡å¼
- **é»˜è®¤å€¼**: `"{server}_1mcp_{tool}"`
- **å¯è‡ªå®šä¹‰**: å¯ä»¥åœ¨é…ç½®ä¸­è¦†ç›–
- **ç¤ºä¾‹**: `"{server}::{tool}"`

### <span v-pre>`{{examples}}`</span>

- **ç±»å‹**: `array<ToolExample>`
- **æè¿°**: ç”¨äºæ–‡æ¡£çš„å·¥å…·ç¤ºä¾‹æ•°ç»„
- **ç»“æ„**:
  ```typescript
  interface ToolExample {
    name: string; // åº”ç”¨äº†æ¨¡å¼çš„å·¥å…·åç§°
    description: string; // å·¥å…·çš„åŠŸèƒ½
  }
  ```

#### é»˜è®¤ç¤ºä¾‹ {#default-examples}

| å·¥å…·åç§°                    | æè¿°                       |
| --------------------------- | -------------------------- |
| `filesystem_1mcp_read_file` | é€šè¿‡æ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨è¯»å–æ–‡ä»¶ |
| `web_1mcp_search`           | é€šè¿‡ç½‘é¡µæœåŠ¡å™¨æœç´¢ç½‘é¡µ     |
| `database_1mcp_query`       | é€šè¿‡æ•°æ®åº“æœåŠ¡å™¨æŸ¥è¯¢æ•°æ®åº“ |

#### è‡ªå®šä¹‰ç¤ºä¾‹

æ‚¨å¯ä»¥åœ¨é…ç½®ä¸­æä¾›è‡ªå®šä¹‰ç¤ºä¾‹ï¼š

```json
{
  "examples": [
    {
      "name": "custom_1mcp_analyze",
      "description": "é€šè¿‡è‡ªå®šä¹‰æœåŠ¡å™¨åˆ†ææ•°æ®"
    },
    {
      "name": "monitor_1mcp_check",
      "description": "é€šè¿‡ç›‘æ§æœåŠ¡å™¨æ£€æŸ¥ç³»ç»Ÿå¥åº·"
    }
  ]
}
```

## å˜é‡ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬æ›¿æ¢

::: v-pre

```text
è¿æ¥åˆ° {{connectedServerCount}} ä¸ª {{connectedPluralServers}}
æœ‰æŒ‡ä»¤çš„: {{instructionalServerCount}} ä¸ª {{pluralServers}}
```

:::

è¾“å‡º: `è¿æ¥åˆ° 5 ä¸ªæœåŠ¡å™¨`
è¾“å‡º: `æœ‰æŒ‡ä»¤çš„: 3 ä¸ªæœåŠ¡å™¨`

### æ¡ä»¶å†…å®¹

::: v-pre

```text
{{#if hasServers}}
  {{connectedServerCount}} ä¸ª {{connectedPluralServers}} å·²è¿æ¥
  {{#if hasInstructionalServers}}
    {{instructionalServerCount}} ä¸ª {{pluralServers}} æ­£åœ¨æä¾›æŒ‡ä»¤
  {{else}}
    æš‚æ— æœåŠ¡å™¨æä¾›æŒ‡ä»¤
  {{/if}}
{{else}}
  æ²¡æœ‰è¿æ¥æœåŠ¡å™¨
{{/if}}
```

:::

### æœåŠ¡å™¨è¿­ä»£ï¼ˆç®€å•ï¼‰

::: v-pre

```text
{{#each serverNames}}
- æœåŠ¡å™¨: {{this}}
{{/each}}
```

:::

### æœåŠ¡å™¨è¿­ä»£ï¼ˆè¯¦ç»†ï¼‰

::: v-pre

```text
{{#each servers}}
{{#if hasInstructions}}
#### {{name}} åŠŸèƒ½
<{{name}}>
{{instructions}}
</{{name}}>
{{/if}}
{{/each}}
```

:::

### å·¥å…·ç¤ºä¾‹

::: v-pre

```text
å¯ç”¨å·¥å…·:
{{#each examples}}
- `{{name}}`: {{description}}
{{/each}}
```

:::

### å¤æ‚æ¨¡æ¿

::: v-pre

```text
# {{title}}

## çŠ¶æ€: {{#if hasServers}}âœ… å·²è¿æ¥{{else}}â³ ç­‰å¾…ä¸­{{/if}}

{{#if hasServers}}
**{{connectedServerCount}} ä¸ª {{connectedPluralServers}} å·²è¿æ¥**{{filterContext}}

### æœåŠ¡å™¨
{{#each serverNames}}
- ğŸ”§ {{this}}
{{/each}}

{{#if hasInstructionalServers}}
### æŒ‡ä»¤
{{instructions}}

### ç¤ºä¾‹å·¥å…·
{{#each examples}}
- `{{name}}` - {{description}}
{{/each}}

*å·¥å…·ä½¿ç”¨æ¨¡å¼: `{{toolPattern}}`*
{{else}}
*æœåŠ¡å™¨å·²è¿æ¥ä½†å°šæœªæä¾›æŒ‡ä»¤*
{{/if}}
{{else}}
ç­‰å¾…æœåŠ¡å™¨è¿æ¥...
{{/if}}
```

:::

## å˜é‡èŒƒå›´å’Œä¸Šä¸‹æ–‡

### è¿‡æ»¤å½±å“

å½“è¿‡æ»¤æ¿€æ´»æ—¶ï¼Œå˜é‡åæ˜ è¿‡æ»¤çš„å­é›†ï¼š

- <span v-pre>`{{connectedServerCount}}`</span> = æ‰€æœ‰è¿‡æ»¤åçš„æœåŠ¡å™¨æ•°é‡
- <span v-pre>`{{instructionalServerCount}}`</span> = æœ‰æŒ‡ä»¤çš„è¿‡æ»¤åæœåŠ¡å™¨æ•°é‡
- <span v-pre>`{{serverNames}}`</span> = ä»…è¿‡æ»¤åçš„æœåŠ¡å™¨åç§°
- <span v-pre>`{{instructions}}`</span> = ä»…æ¥è‡ªè¿‡æ»¤åæœåŠ¡å™¨çš„æŒ‡ä»¤
- <span v-pre>`{{filterContext}}`</span> = æ´»åŠ¨è¿‡æ»¤å™¨çš„æè¿°

### å­—æ¯é¡ºåº

æœåŠ¡å™¨ç›¸å…³å˜é‡ä¿æŒä¸€è‡´çš„å­—æ¯é¡ºåºï¼š

- <span v-pre>`{{serverList}}`</span> æŒ‰å­—æ¯é¡ºåºæ’åº
- <span v-pre>`{{serverNames}}`</span> æ•°ç»„æŒ‰å­—æ¯é¡ºåºæ’åº
- <span v-pre>`{{instructions}}`</span> éƒ¨åˆ†æŒ‰å­—æ¯é¡ºåºå‡ºç°

### å®æ—¶æ›´æ–°

æ‰€æœ‰å˜é‡éƒ½åæ˜ å½“å‰çŠ¶æ€ï¼š

- æœåŠ¡å™¨è¿æ¥/æ–­å¼€æ›´æ–°è®¡æ•°
- æŒ‡ä»¤æ›´æ”¹æ›´æ–°å†…å®¹
- è¿‡æ»¤æ›´æ”¹æ›´æ–°æ‰€æœ‰ç›¸å…³å˜é‡

## é”™è¯¯å¤„ç†

### ç¼ºå¤±å˜é‡

- æœªå®šä¹‰çš„å˜é‡æ¸²æŸ“ä¸ºç©ºå­—ç¬¦ä¸²
- æ¨¡æ¿å¼•æ“ç»§ç»­å¤„ç†
- ç¼ºå¤±å˜é‡ä¸ä¼šæŠ›å‡ºé”™è¯¯

### æ— æ•ˆæ¨¡æ¿

- è¯­æ³•é”™è¯¯å¯¼è‡´å›é€€åˆ°é»˜è®¤æ¨¡æ¿
- é”™è¯¯è¢«è®°å½•ä½†ä¸ä¼šå¯¼è‡´æœåŠ¡å™¨å´©æºƒ
- æ¨¡æ¿ç¼–è¯‘è¢«ç¼“å­˜ä»¥æé«˜æ€§èƒ½

### æ¨¡æ¿æ¸²æŸ“

**æ³¨æ„**: 1MCP ä½¿ç”¨ `noEscape: true` é…ç½®ï¼Œå› æ­¤æ‰€æœ‰å˜é‡é»˜è®¤æœªè½¬ä¹‰ï¼š

- <span v-pre>`{{variable}}`</span> è¾“å‡ºåŸå§‹å†…å®¹ï¼ˆæœªè½¬ä¹‰ï¼‰
- æ— éœ€ä¸‰é‡æ‹¬å· - æ‰€æœ‰å†…å®¹æŒ‰åŸæ ·æ¸²æŸ“
- éå¸¸é€‚åˆ LLM æ¶ˆè´¹ï¼ŒXML æ ‡ç­¾å’Œæ ‡è®°åº”è¢«ä¿ç•™
- ä¸éœ€è¦ XSS ä¿æŠ¤ï¼Œå› ä¸ºæ¨¡æ¿ç”¨äº LLM æŒ‡ä»¤ç›®çš„ï¼Œè€Œä¸æ˜¯ç½‘é¡µæ˜¾ç¤º
